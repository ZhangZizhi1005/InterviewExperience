# 并发

---

[toc]

---

## 零、进程与线程 ##

> 多道程序设计技术允许多个程序同时进入内存并运行，在这样的并发环境下，如何描述这样执行的程序呢？因此引入了“进程”。

### 进程（Process） ##

#### 定义 ####

进程是具有独立功能的程序关于**某个数据集合上**的**一次运行活动**，是系统进行资源分配的独立单位。若不支持线程机制，进程的系统调度的单位。否则，线程是系统调度的单位。

#### 特点 ####

- 进程是程序的一次执行过程。如果程序执行多次，则需要两个或者多个进程。
- 进程是正在运行的程序的抽象。它代表运行的CPU，因此也可以看作是对CPU的抽象。
- 系统资源（如内存、文件等）以进程为单位进行分配
- 操作系统为每个进程分配了独立的地址空间
- 操作系统通过“调度”将控制权交给进程



---



## 一、什么是线程 ##

补充后和零合并

---

## 二、线程状态 ##

> 线程共有以下六种状态。要确定一个线程的当前状态，可以通过调用getState方法
>
> - New（新建）
> - Runnable（可运行）
> - Blocked（阻塞）
> - Waiting（等待）
> - Timed Waiting（计时等待）
> - Terminated（终止）

### 1、新建 ##

​	当用new操作符创建了一个新线程时（例如```new Thread(r)```），这个线程不会运行，此时其状态为 *new（新建）*

### 2、可运行 ###

- 一旦调用了```start```方法，线程就转变为 *Runnable（可运行）* 状态 
- 在任意给定的时刻，一个处于 *Runnable（可运行）* 状态的线程，可能在运行也可能不在运行
    - 一个线程开始运行后不一定保持运行，需要暂停让其他线程有机会运行

### 3、阻塞、等待和计时等待

> 当线程处于这三种状态时，它暂时不活动（即线程对应的代码不运行），此时依赖于线程调度器重新激活这一线程
>
> 值得注意的是，激活后线程处于 *可运行* 状态，但是不一定会运行，需要检查线程与当前运行线程的优先级

<img src=".\ref\线程状态" alt="image-20210225223951766" style="zoom: 50%;" />

### 4、终止 ###

​	线程会由于以下两个原因之一终止

- ```run```方法正常退出，程序自然终止
- 因为一个没有捕获的异常终止了```run```方法，线程意外终止

---

## 三、线程属性 ##



